(function(b){var a={config:{selector:"select.tl_tagsinput, select.tagsinput"},init:function(){this.setupTagsInput()},setupTagsInput:function(){var c=b(this.config.selector);c.each(function(){var h=b(this),m=h.data("placeholder"),j=h.data("mode"),d=h.data("post-data"),n={queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.whitespace,limit:10},i=h.data();function k(p,o){d.query=p;o.type="POST";o.data=d;return o}function f(o){return o}switch(j){case"local":n.local=h.data("items");break;case"remote":n.remote={url:location.href,prepare:k,transform:f,rateLimitBy:"debounce",rateLimitWait:300};break}var l=new Bloodhound(n);l.initialize();var g={itemValue:"value",itemText:"label",typeaheadjs:{name:"options",displayKey:"label",source:l.ttAdapter(),highlight:true,limit:10},confirmKeys:[9,13,188],tagClass:function(o){return o.className?o.className:"label label-info"}};var e=b.extend({},g,i);h.tagsinput(e);h.siblings(".bootstrap-tagsinput").addClass("tl_select");h.find("option:selected").each(function(){h.tagsinput("add",{value:this.value,label:this.text,className:this.className})});if(h.data("submitonchange")=="1"){h.on("itemAdded",function(o){h.closest("form").submit()})}h.tagsinput("input").on("blur",function(o){if(this.value!=""&&h.data("free-input")){h.tagsinput("add",{label:this.value})}this.value="";if(typeof m==="undefined"||m.length>0){h.tagsinput("input").width(hintWidth)}});h.on("itemAdded",function(o){if(typeof m==="undefined"||m.length>0){h.tagsinput("input").val("")}})})}};b(document).ready(function(){a.init()});b(document).ajaxComplete(function(){a.init()})})(jQuery);