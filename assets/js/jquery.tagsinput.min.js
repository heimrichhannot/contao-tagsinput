(function(b){var a={config:{selector:"select.tl_tagsinput, select.tagsinput"},init:function(){this.setupTagsInput()},setupTagsInput:function(){var c=b(this.config.selector);c.each(function(){var e=b(this),g=e.data("placeholder");var d=new Bloodhound({local:e.data("items"),identify:function(h){return h.value},datumTokenizer:Bloodhound.tokenizers.obj.whitespace("label"),queryTokenizer:Bloodhound.tokenizers.whitespace,});d.initialize();e.tagsinput({itemValue:"label",itemText:"label",maxTags:e.data("max-tags")?e.data("max-tags"):"",typeaheadjs:{name:"options",displayKey:"label",source:d.ttAdapter(),},freeInput:e.data("free-input"),tagClass:function(h){return h.className?h.className:"label label-info"}});if(typeof g==="undefined"||g.length>0){e.tagsinput("input").attr("placeholder",g)}var f=e.tagsinput("input").width();e.find("option:selected").each(function(){e.tagsinput("add",{value:this.value,label:this.text,className:this.className})});e.tagsinput("input").on("keydown",function(h){if(h.keyCode==9||h.keyCode==13||h.keyCode==188){if(this.value!=""&&e.data("free-input")){e.tagsinput("add",{label:this.value});this.value=""}h.preventDefault()}if(h.keyCode==40){}});e.tagsinput("input").on("blur",function(h){if(this.value!=""&&e.data("free-input")){e.tagsinput("add",{label:this.value})}this.value="";if(typeof g==="undefined"||g.length>0){e.tagsinput("input").width(f)}});e.on("itemAdded",function(h){if(typeof g==="undefined"||g.length>0){e.tagsinput("input").width(f)}})})}};b(document).ready(function(){a.init()});b(document).ajaxComplete(function(){a.init()})})(jQuery);